# Project: [Project Name]

> **Purpose**: Document tech stack, architecture, and key design decisions
>
> **Created**: [YYYY-MM-DD]
> **Last Updated**: [YYYY-MM-DD]

---

## Tech Stack

### Language & Runtime
- **Language**: [e.g., TypeScript 5.3, Python 3.11, Go 1.21, Rust 1.75]
- **Runtime**: [e.g., Node 20 LTS, Python 3.11, Go 1.21]
- **Package Manager**: [e.g., npm, yarn, pnpm, pip, poetry, cargo]

### Frontend (if applicable)
- **Framework**: [e.g., React 18, Vue 3, Svelte, Next.js 14]
- **State Management**: [e.g., Redux Toolkit, Zustand, Pinia, Context API]
- **Styling**: [e.g., Tailwind CSS, CSS Modules, styled-components]
- **UI Library**: [e.g., shadcn/ui, MUI, Ant Design, Chakra UI]

### Backend (if applicable)
- **Framework**: [e.g., Express, Fastify, Django, FastAPI, Gin, Actix]
- **API Type**: [e.g., REST, GraphQL, gRPC, tRPC]
- **Authentication**: [e.g., JWT, OAuth2, Passport, Auth0, Clerk]

### Database
- **Primary DB**: [e.g., PostgreSQL 15, MongoDB 7, MySQL 8, SQLite]
- **ORM/Query Builder**: [e.g., Prisma, TypeORM, SQLAlchemy, GORM, Diesel]
- **Caching**: [e.g., Redis, Memcached, in-memory]

### Infrastructure
- **Hosting**: [e.g., Vercel, AWS, GCP, Azure, Railway, Fly.io]
- **CI/CD**: [e.g., GitHub Actions, GitLab CI, CircleCI, Jenkins]
- **Containerization**: [e.g., Docker, Podman, none]

### Key Libraries & Tools
- **Validation**: [e.g., Zod, Yup, Joi, Pydantic, validator]
- **Testing**: [e.g., Vitest, Jest, Pytest, Go testing, cargo test]
- **Linting**: [e.g., ESLint, Ruff, golangci-lint, Clippy]
- **Formatting**: [e.g., Prettier, Black, gofmt, rustfmt]

---

## Architecture

### Type
[e.g., Monolith, Microservices, Serverless, Jamstack, Modular monolith]

### Structure
```
[Describe high-level architecture]

Example for full-stack app:
- Frontend (React SPA) → API Gateway → Backend Services
- Backend → Database + Cache
- Background workers for async jobs
```

### Key Patterns
- [e.g., Repository pattern for data access]
- [e.g., Service layer for business logic]
- [e.g., Dependency injection for testability]
- [e.g., Event-driven for notifications]

### Folder Structure
```
[Document your actual structure]

Example:
src/
├── components/     # React components
├── lib/           # Shared utilities
├── api/           # API routes/endpoints
├── db/            # Database schemas and migrations
├── hooks/         # Custom React hooks
└── types/         # TypeScript type definitions
```

---

## Key Design Decisions

### Decision: [Name]
**Date**: [YYYY-MM-DD]
**Context**: [Why was this decision needed?]
**Options Considered**:
1. [Option 1] - Pros: [...] Cons: [...]
2. [Option 2] - Pros: [...] Cons: [...]

**Decision**: [Chosen option]
**Rationale**: [Why this option?]
**Trade-offs**: [What did we give up?]

---

### Decision: [Name]
**Date**: [YYYY-MM-DD]
**Context**: [Why was this decision needed?]
**Decision**: [What was chosen?]
**Rationale**: [Why?]

---

## Environment & Configuration

### Environment Variables
```bash
# Required
DATABASE_URL=          # PostgreSQL connection string
API_KEY=              # Third-party API key
JWT_SECRET=           # Secret for signing JWTs

# Optional
REDIS_URL=            # Redis connection (defaults to localhost)
LOG_LEVEL=            # Logging verbosity (defaults to 'info')
```

### Local Development Setup
1. [Step 1: e.g., Install dependencies: `npm install`]
2. [Step 2: e.g., Copy `.env.example` to `.env` and fill values]
3. [Step 3: e.g., Run database migrations: `npm run migrate`]
4. [Step 4: e.g., Start dev server: `npm run dev`]

---

## Dependencies & Version Constraints

### Critical Constraints
- [e.g., Node >= 20 (required for native fetch)]
- [e.g., PostgreSQL >= 14 (required for JSON operations)]
- [e.g., Python >= 3.11 (required for tomllib)]

### Pinned Versions (Do Not Upgrade Without Testing)
- [e.g., `react@18.2.0` - Known issue with 18.3.x in our setup]
- [e.g., `prisma@5.10.0` - Breaking changes in 5.11+]

---

## Testing Strategy

### Test Types
- **Unit**: [What's covered? e.g., Business logic, utilities]
- **Integration**: [What's covered? e.g., API endpoints, database operations]
- **E2E**: [What's covered? e.g., Critical user flows]

### Coverage Targets
- Critical paths: 95%+
- Core business logic: 80%+
- Overall: 60%+

### Test Commands
```bash
npm run test          # Run all tests
npm run test:unit     # Unit tests only
npm run test:integration  # Integration tests only
npm run test:coverage     # Generate coverage report
```

---

## Performance Targets

### API Response Times
- Simple queries: < 200ms
- Complex queries: < 1s
- File uploads: < 5s

### Frontend Metrics
- Initial load: < 2s
- Time to interactive: < 3s
- Bundle size: < 200KB (initial)

### Database
- No N+1 queries
- Indexes on all foreign keys
- Query timeout: 10s max

---

## Security Considerations

### Authentication
- [e.g., JWT with 1h expiration, refresh tokens in httpOnly cookies]

### Authorization
- [e.g., Role-based access control (RBAC)]

### Data Protection
- [e.g., All passwords hashed with bcrypt (cost factor: 12)]
- [e.g., PII encrypted at rest]
- [e.g., SQL injection prevented via parameterized queries]

### API Security
- [e.g., Rate limiting: 100 req/min per IP]
- [e.g., CORS configured for specific origins only]
- [e.g., All inputs validated with Zod schemas]

---

## Deployment

### Environments
1. **Development**: Local machines
2. **Staging**: [e.g., staging.example.com - mirrors production]
3. **Production**: [e.g., example.com]

### Deployment Process
1. [e.g., Push to branch triggers GitHub Actions]
2. [e.g., Tests must pass]
3. [e.g., Build & deploy to Vercel]
4. [e.g., Run post-deploy health checks]

### Rollback Procedure
[e.g., Revert to previous deployment via Vercel dashboard, or git revert + push]

---

## Known Issues & Gotchas

### [Issue/Gotcha Name]
**Description**: [What's the issue?]
**Workaround**: [How to handle it?]
**Tracking**: [Link to issue, or note if accepted limitation]

---

### [Issue/Gotcha Name]
**Description**: [What's the issue?]
**Workaround**: [How to handle it?]

---

## External Resources

- **Design System**: [Link to Figma, Storybook, etc.]
- **API Documentation**: [Link to Swagger, Postman, etc.]
- **Project Board**: [Link to Jira, Linear, GitHub Projects, etc.]
- **Monitoring**: [Link to Sentry, DataDog, etc.]

---

## Changelog

### [YYYY-MM-DD]
- [Change description, e.g., "Migrated from Express to Fastify"]

### [YYYY-MM-DD]
- [Change description, e.g., "Added Redis for session storage"]

---

**Instructions for AI**:
- Update this file when architecture decisions are made
- Keep it concise (50-150 lines ideal, 300 max)
- Focus on "what" and "why", not "how" (that's in code)
- Link to code examples when helpful
- Archive old decisions to `.agent/memory/` if this grows too large
